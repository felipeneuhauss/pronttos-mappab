{"version":3,"sources":["../../src/pages/schedules/add-event/add-event.module.ts","../../src/pages/schedules/add-event/add-event.ts"],"names":[],"mappings":"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","file":"30.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddEventPage } from './add-event';\n\n@NgModule({\n  declarations: [\n    AddEventPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AddEventPage),\n  ],\n})\nexport class AddEventPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/schedules/add-event/add-event.module.ts","import { Component } from '@angular/core';\nimport { AlertController, IonicPage, ModalController, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { PatientSearchPage, ProfessionalSearchPage } from '../../index';\nimport { PatientPaginationMapper } from '../../../models/patient.model';\nimport { User } from '../../../providers';\nimport { UserMapper } from '../../../models/user.model';\nimport { SchedulesProvider } from '../../../providers/schedules/schedules';\nimport { ToastProvider } from '../../../providers/toast/toast';\nimport { ProfessionalMapper } from '../../../models/professional.model';\nimport { LoadingProvider } from '../../../providers/loading/loading';\n\n// import * as moment from 'moment';\n\n@IonicPage()\n@Component({\n  selector: 'page-add-event',\n  templateUrl: 'add-event.html',\n})\nexport class AddEventPage {\n\n  public schedule: any = {\n    patient_id: '',\n    scheduled_to: '',\n    professional_id: '',\n    time: '',\n    patient: {name: ''},\n    professional: {name: ''}\n  };\n\n  public patient: PatientPaginationMapper;\n\n  public professional: ProfessionalMapper;\n\n  public loggedUser: UserMapper;\n\n  constructor(\n    public alertCtrl: AlertController,\n    public navCtrl: NavController,\n    private schedulePrv: SchedulesProvider,\n    public navParams: NavParams,\n    private user: User,\n    private loadingPrv: LoadingProvider,\n    public viewCtrl: ViewController,\n    private toastPrv: ToastProvider,\n    private modalCtrl: ModalController) {\n  }\n\n  ionViewDidLoad() {\n    this.schedule = this.navParams.get('event') ? this.navParams.get('event') : this.schedule;\n    console.log('this.schedule', this.schedule);\n    if (this.schedule.scheduled_to) {\n      let scheduledTo = this.schedule.scheduled_to.split(' ');\n      this.schedule.scheduled_to = scheduledTo[0];\n      this.schedule.time = scheduledTo[1];\n      this.schedule.professional.professional_id = this.schedule.professional.id ? this.schedule.professional.id : null;\n      this.schedule.patient.patient_id = this.schedule.patient.id ? this.schedule.patient.id : null;\n    }\n\n    this.getLoggedUser();\n  }\n\n  async getLoggedUser() {\n    this.loggedUser = await this.user.user();\n  }\n\n  save() {\n\n    this.schedule.patient_id = this.schedule.patient ? this.schedule.patient.patient_id : null;\n\n    this.schedule.professional_id = this.schedule.professional ? this.schedule.professional.professional_id : null;\n\n    if (!this.schedule.time) {\n      this.toastPrv.show('Informe o horário');\n      return;\n    }\n\n    if (!this.schedule.patient_id) {\n      this.toastPrv.show('Selecione um paciente');\n      return;\n    }\n\n\n    if (!this.schedule.professional_id) {\n      this.toastPrv.show('Selecione um profissional');\n      return;\n    }\n\n    this.schedule.scheduled_to = this.schedule.scheduled_to + ' ' + this.schedule.time;\n\n    this.loadingPrv.show('Gravando agendamento...');\n    this.schedulePrv.save(this.schedule).subscribe((data) => {\n      this.toastPrv.show('Agendamento salvo com sucesso');\n      this.loadingPrv.dismiss();\n      this.dismiss();\n    }, () => {\n      this.loadingPrv.dismiss();\n    });\n\n  }\n\n  remove() {\n    let alert = this.alertCtrl.create({\n      title: 'Confirmar remoção',\n      message: 'Deseja remover o agendamento?',\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Sim',\n          handler: () => {\n            this.loadingPrv.show('Removendo agendamento...');\n            this.schedulePrv.delete(this.schedule).subscribe((data: any) => {\n              this.toastPrv.show('Agendamento removido com sucesso');\n              this.loadingPrv.dismiss();\n              this.navCtrl.pop();\n            }, () => {\n              this.loadingPrv.dismiss();\n            });\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  choosePatient() {\n    let patientSearchModal = this.modalCtrl.create(PatientSearchPage);\n\n    patientSearchModal.onDidDismiss((data: any) => {\n      this.schedule.patient = data.patient;\n      console.log('patient', this.schedule.patient);\n    });\n\n    patientSearchModal.present();\n  }\n\n  changeProfessional() {\n    let searchModal = this.modalCtrl.create(ProfessionalSearchPage);\n\n    searchModal .onDidDismiss((data: any) => {\n      this.schedule.professional = data.professional;\n      console.log('professional', this.schedule.professional);\n    });\n\n    searchModal .present();\n  }\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/schedules/add-event/add-event.ts"],"sourceRoot":""}