{"version":3,"sources":["../../src/pages/evolutions/evolution-filter/evolution-filter.module.ts","../../src/pages/evolutions/evolutions.ts","../../src/pages/evolutions/evolution-filter/evolution-filter.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EvolutionFilterPage } from './evolution-filter';\n\n@NgModule({\n  declarations: [\n    EvolutionFilterPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EvolutionFilterPage),\n  ],\n})\nexport class EvolutionFilterPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/evolutions/evolution-filter/evolution-filter.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, ModalController, NavController, NavParams } from 'ionic-angular';\nimport { EvolutionsProvider } from '../../providers/evolutions/evolutions';\nimport { EvolutionMapper } from '../../models/evolution.model';\nimport { EvolutionFilterPage, PatientEvolutionDetailPage } from '../index';\n\n/**\n * Generated class for the PatientEvolutionsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\nexport const _EVOLUTION_DATA_FILTER = '_EVOLUTION_DATA_FILTER';\n\n@IonicPage({\n  name: 'EvolutionsPage'\n})\n@Component({\n  selector: 'page-evolutions',\n  templateUrl: 'evolutions.html',\n})\nexport class EvolutionsPage {\n\n  public searching: boolean = false;\n\n  public currentItems: any[] = [];\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n              private evolutions: EvolutionsProvider, private modalCtrl: ModalController) {\n  }\n\n  ionViewDidLoad() {\n    this.filterEvolutions({});\n  }\n\n  openItem(item: EvolutionMapper) {\n    let evolutionDetailModal = this.modalCtrl.create(PatientEvolutionDetailPage, { evolution: item });\n    evolutionDetailModal.present();\n  }\n\n  filter() {\n    let evolutionFilterModal = this.modalCtrl.create(EvolutionFilterPage);\n\n    evolutionFilterModal.onDidDismiss((data: any) => {\n      if (data.cancel) {\n        return;\n      }\n      this.filterEvolutions(data);\n    })\n\n    evolutionFilterModal.present();\n  }\n\n  filterEvolutions(params?) {\n      this.searching = true;\n      this.currentItems = [];\n      this.evolutions.query(params).subscribe((data: any[]) => {\n        this.searching = false;\n        this.currentItems = data;\n      });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/evolutions/evolutions.ts","import { Component } from '@angular/core';\nimport { IonicPage, ModalController, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { UserMapper } from '../../../models/user.model';\nimport { User } from '../../../providers';\nimport { PatientSearchPage, ProfessionalSearchPage } from '../../index';\nimport { Storage } from '@ionic/storage';\nimport { _EVOLUTION_DATA_FILTER } from '../evolutions';\n\n/**\n * Generated class for the EvolutionFilterPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'EvolutionFilterPage'\n})\n@Component({\n  selector: 'page-evolution-filter',\n  templateUrl: 'evolution-filter.html',\n})\nexport class EvolutionFilterPage {\n\n  public professional: any = {name: ''};\n\n  public patient: any = {name: ''};\n\n  public date: string;\n\n  public loggedUser: UserMapper;\n\n  public customOptions: any = {\n    buttons: [{\n      text: 'Limpar',\n      handler: () => {\n        this.date = null;\n      }\n    }]\n  };\n\n  constructor(public navCtrl: NavController, private user: User, public viewCtrl: ViewController,\n              private modalCtrl: ModalController, public navParams: NavParams, private storage: Storage) {\n  }\n\n  ionViewDidLoad() {\n    this.getLoggedUser();\n    this.initFilter();\n  }\n\n  initFilter() {\n    this.storage.get(_EVOLUTION_DATA_FILTER).then((evolutionFilterData) => {\n      if (evolutionFilterData) {\n        this.patient = evolutionFilterData.patient ? evolutionFilterData.patient : {name: ''};\n        this.professional = evolutionFilterData.professional ? evolutionFilterData.professional : {name: ''};\n        this.date = evolutionFilterData.date ? evolutionFilterData.date : '';\n      }\n    });\n  }\n\n  async getLoggedUser() {\n    this.loggedUser = await this.user.user();\n  }\n\n  dateChanged() {\n    this.addNewFilterData('date', this.date);\n  }\n\n  choosePatient() {\n    let patientSearchModal = this.modalCtrl.create(PatientSearchPage);\n\n    patientSearchModal.onDidDismiss((data: any) => {\n      if (data.patient) {\n        this.patient = data.patient;\n        this.addNewFilterData('patient', this.patient);\n      }\n    });\n\n    patientSearchModal.present();\n  }\n\n  changeProfessional() {\n    let searchModal = this.modalCtrl.create(ProfessionalSearchPage);\n\n    searchModal.onDidDismiss((data: any) => {\n      if (data.professional) {\n        this.professional = data.professional;\n        this.addNewFilterData('professional', this.professional)\n      }\n    });\n\n    searchModal.present();\n  }\n\n  dismiss(cancel?) {\n    let params = {cancel: cancel ? true : false};\n\n    if (this.patient && this.patient.name && this.patient.patient_id) {\n      params['patient_id'] = this.patient.patient_id\n    }\n\n    if (this.professional && this.professional.name && this.professional.professional_id) {\n      params['professional_id'] = this.professional.professional_id;\n    }\n\n    if (this.date) {\n      params['created_at'] = this.date\n      this.addNewFilterData('date', this.date);\n    }\n\n    this.viewCtrl.dismiss(params);\n  }\n\n  filter() {\n    this.dismiss();\n  }\n\n  addNewFilterData(field, value) {\n    if (value !== undefined && value !== '' && value !== null) {\n      this.storage.get(_EVOLUTION_DATA_FILTER).then((evolutionFilterData: any) => {\n        if (!evolutionFilterData) {\n          evolutionFilterData = {professional:'', patient:'', date: ''};\n        }\n        evolutionFilterData[field] = value;\n        this.storage.set(_EVOLUTION_DATA_FILTER, evolutionFilterData);\n      });\n    }\n  }\n\n  clear() {\n    this.professional = {name: ''};\n    this.patient = {name: ''};\n    this.date = '';\n    this.storage.set(_EVOLUTION_DATA_FILTER, null);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/evolutions/evolution-filter/evolution-filter.ts"],"sourceRoot":""}